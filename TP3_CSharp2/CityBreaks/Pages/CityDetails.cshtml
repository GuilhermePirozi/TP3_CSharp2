@page "{name}"
@model CityBreaks.Pages.CityDetailsModel
@{
    ViewData["Title"] = $"Detalhes de {Model.City.Name}";
}

<h2>Detalhes da Cidade</h2>

<div class="mb-4">
    <h4>@Model.City.Name – <em>@Model.City.Country.CountryName</em></h4>
</div>

<h3 class="mt-4">Propriedades disponíveis</h3>

@if (Model.City.Properties?.Count > 0)
{
    <ul class="list-group list-group-flush">
        @foreach (var prop in Model.City.Properties)
        {
            <li class="list-group-item d-flex justify-content-between align-items-center">
                <span>
                    <strong>@prop.Name</strong> – R$ @prop.PricePerNight.ToString("F2")
                </span>
                <div class="btn-group">
                    <a asp-page="/EditProperty" asp-route-id="@prop.Id" class="btn btn-sm btn-warning">
                        Editar
                    </a>
                    <a asp-page-handler="Delete"
                       asp-route-id="@prop.Id"
                       asp-route-name="@Model.City.Name"
                       class="btn btn-sm btn-danger ms-2"
                       onclick="return confirm('Deseja realmente excluir esta propriedade?')">
                        Excluir
                    </a>
                </div>
            </li>
        }
    </ul>
}
else
{
    <p><em>Sem propriedades cadastradas para esta cidade.</em></p>
}

<div class="mt-3">
    <a asp-page="/CreateProperty" class="btn btn-success">Cadastrar nova propriedade</a>
    <a asp-page="/Index" class="btn btn-secondary ms-2">Voltar</a>
</div>
